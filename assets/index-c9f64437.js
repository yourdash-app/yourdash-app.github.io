import{r as h,j as o,B as x,c as w,d as N,e as A,I as C,f as S,R as P,a as R}from"./index-88b4056e.js";function v(a){if(typeof a!="string")throw new TypeError("Path must be a string. Received "+JSON.stringify(a))}function y(a,e){for(var r="",t=0,n=-1,l=0,s,i=0;i<=a.length;++i){if(i<a.length)s=a.charCodeAt(i);else{if(s===47)break;s=47}if(s===47){if(!(n===i-1||l===1))if(n!==i-1&&l===2){if(r.length<2||t!==2||r.charCodeAt(r.length-1)!==46||r.charCodeAt(r.length-2)!==46){if(r.length>2){var f=r.lastIndexOf("/");if(f!==r.length-1){f===-1?(r="",t=0):(r=r.slice(0,f),t=r.length-1-r.lastIndexOf("/")),n=i,l=0;continue}}else if(r.length===2||r.length===1){r="",t=0,n=i,l=0;continue}}e&&(r.length>0?r+="/..":r="..",t=2)}else r.length>0?r+="/"+a.slice(n+1,i):r=a.slice(n+1,i),t=i-n-1;n=i,l=0}else s===46&&l!==-1?++l:l=-1}return r}function p(a,e){var r=e.dir||e.root,t=e.base||(e.name||"")+(e.ext||"");return r?r===e.root?r+t:r+a+t:t}var m={resolve:function(){for(var e="",r=!1,t,n=arguments.length-1;n>=-1&&!r;n--){var l;n>=0?l=arguments[n]:(t===void 0&&(t=process.cwd()),l=t),v(l),l.length!==0&&(e=l+"/"+e,r=l.charCodeAt(0)===47)}return e=y(e,!r),r?e.length>0?"/"+e:"/":e.length>0?e:"."},normalize:function(e){if(v(e),e.length===0)return".";var r=e.charCodeAt(0)===47,t=e.charCodeAt(e.length-1)===47;return e=y(e,!r),e.length===0&&!r&&(e="."),e.length>0&&t&&(e+="/"),r?"/"+e:e},isAbsolute:function(e){return v(e),e.length>0&&e.charCodeAt(0)===47},join:function(){if(arguments.length===0)return".";for(var e,r=0;r<arguments.length;++r){var t=arguments[r];v(t),t.length>0&&(e===void 0?e=t:e+="/"+t)}return e===void 0?".":m.normalize(e)},relative:function(e,r){if(v(e),v(r),e===r||(e=m.resolve(e),r=m.resolve(r),e===r))return"";for(var t=1;t<e.length&&e.charCodeAt(t)===47;++t);for(var n=e.length,l=n-t,s=1;s<r.length&&r.charCodeAt(s)===47;++s);for(var i=r.length,f=i-s,d=l<f?l:f,u=-1,c=0;c<=d;++c){if(c===d){if(f>d){if(r.charCodeAt(s+c)===47)return r.slice(s+c+1);if(c===0)return r.slice(s+c)}else l>d&&(e.charCodeAt(t+c)===47?u=c:c===0&&(u=0));break}var j=e.charCodeAt(t+c),k=r.charCodeAt(s+c);if(j!==k)break;j===47&&(u=c)}var g="";for(c=t+u+1;c<=n;++c)(c===n||e.charCodeAt(c)===47)&&(g.length===0?g+="..":g+="/..");return g.length>0?g+r.slice(s+u):(s+=u,r.charCodeAt(s)===47&&++s,r.slice(s))},_makeLong:function(e){return e},dirname:function(e){if(v(e),e.length===0)return".";for(var r=e.charCodeAt(0),t=r===47,n=-1,l=!0,s=e.length-1;s>=1;--s)if(r=e.charCodeAt(s),r===47){if(!l){n=s;break}}else l=!1;return n===-1?t?"/":".":t&&n===1?"//":e.slice(0,n)},basename:function(e,r){if(r!==void 0&&typeof r!="string")throw new TypeError('"ext" argument must be a string');v(e);var t=0,n=-1,l=!0,s;if(r!==void 0&&r.length>0&&r.length<=e.length){if(r.length===e.length&&r===e)return"";var i=r.length-1,f=-1;for(s=e.length-1;s>=0;--s){var d=e.charCodeAt(s);if(d===47){if(!l){t=s+1;break}}else f===-1&&(l=!1,f=s+1),i>=0&&(d===r.charCodeAt(i)?--i===-1&&(n=s):(i=-1,n=f))}return t===n?n=f:n===-1&&(n=e.length),e.slice(t,n)}else{for(s=e.length-1;s>=0;--s)if(e.charCodeAt(s)===47){if(!l){t=s+1;break}}else n===-1&&(l=!1,n=s+1);return n===-1?"":e.slice(t,n)}},extname:function(e){v(e);for(var r=-1,t=0,n=-1,l=!0,s=0,i=e.length-1;i>=0;--i){var f=e.charCodeAt(i);if(f===47){if(!l){t=i+1;break}continue}n===-1&&(l=!1,n=i+1),f===46?r===-1?r=i:s!==1&&(s=1):r!==-1&&(s=-1)}return r===-1||n===-1||s===0||s===1&&r===n-1&&r===t+1?"":e.slice(r,n)},format:function(e){if(e===null||typeof e!="object")throw new TypeError('The "pathObject" argument must be of type Object. Received type '+typeof e);return p("/",e)},parse:function(e){v(e);var r={root:"",dir:"",base:"",ext:"",name:""};if(e.length===0)return r;var t=e.charCodeAt(0),n=t===47,l;n?(r.root="/",l=1):l=0;for(var s=-1,i=0,f=-1,d=!0,u=e.length-1,c=0;u>=l;--u){if(t=e.charCodeAt(u),t===47){if(!d){i=u+1;break}continue}f===-1&&(d=!1,f=u+1),t===46?s===-1?s=u:c!==1&&(c=1):s!==-1&&(c=-1)}return s===-1||f===-1||c===0||c===1&&s===f-1&&s===i+1?f!==-1&&(i===0&&n?r.base=r.name=e.slice(1,f):r.base=r.name=e.slice(i,f)):(i===0&&n?(r.name=e.slice(1,s),r.base=e.slice(1,f)):(r.name=e.slice(i,s),r.base=e.slice(i,f)),r.ext=e.slice(s,f)),i>0?r.dir=e.slice(0,i-1):n&&(r.dir="/"),r},sep:"/",delimiter:":",win32:null,posix:null};m.posix=m;var b=m;const L=({children:a})=>{const[e,r]=h.useState(null);return o.jsxs("main",{className:"grid grid-cols-[auto,1fr] h-full",children:[o.jsxs("section",{className:"flex flex-col min-h-full overflow-x-hidden overflow-y-auto pl-1 pr-1 border-0 border-r-[1px] border-container-border min-w-[10rem]",children:[o.jsx("h1",{className:"font-semibold text-container-fg text-3xl text-center pt-2 pb-2",children:"Files"}),o.jsxs("div",{className:"flex flex-col gap-1",children:[o.jsx("h2",{className:"pl-2 pr-2 pb-0.5 pt-2",children:"Shortcuts"}),e?e.map(t=>o.jsx(x,{className:"!pt-0.5 !pb-0.5",children:o.jsx("span",{className:"m-0",children:b.basename(t.path)})},t.path)):o.jsx(x,{children:"Add Home shortcut?"})]})]}),o.jsx("section",{className:"flex flex-col w-full min-h-full overflow-auto",children:a})]})},z=()=>{const[a,e]=h.useState("/"),[r,t]=h.useState([]);return h.useEffect(()=>{w.postJson("/app/files/get",{path:a},n=>{if(Object.keys(n.files).length===0)return t([]);t((n==null?void 0:n.files)||[])})},[a]),o.jsxs(L,{children:[o.jsxs("section",{className:"p-2 flex flex-col bg-container-bg top-0 sticky pb-0 gap-1 shadow-lg z-10",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(N,{onClick:()=>{e(b.join(a,".."))},icon:"chevron-left-16"}),o.jsx("span",{children:a})]}),o.jsxs("div",{className:A("bg-container-bg pl-2 pr-2 pt-0.5 pb-0.5 text-left transition-colors [transition:var(--transition)] hover:[transition:var(--transition-fast)] flex items-center"),children:[o.jsx(C,{name:"info-16",className:"h-[calc(100%-0.35rem)] mr-1.5",color:"rgb(var(--container-fg))"}),o.jsx("span",{className:"mr-auto",children:"Name"}),o.jsx("span",{children:"Type"})]})]}),o.jsx("section",{className:"p-0.5",children:r.map(n=>o.jsx(S,{items:[{name:"Delete",onClick(){return 0}},{name:"Pin to sidebar",onClick(){return 0}}],className:"w-full flex",children:o.jsxs(x,{onClick:()=>{e(b.join(a,n.name))},className:A("pl-2 pr-2 pt-0.5 pb-0.5 text-left transition-colors rounded-none [transition:var(--transition)] hover:[transition:var(--transition-fast)] flex items-center w-full"),children:[o.jsx(C,{name:n.type==="file"?"file-16":"file-directory-16",className:"h-[calc(100%-0.35rem)] mr-1.5",color:"rgb(var(--container-fg))"}),o.jsx("span",{className:"mr-auto",children:n.name}),o.jsx("span",{children:n.type})]})},n.name))})]})},E=()=>o.jsx(P,{children:o.jsx(R,{index:!0,element:o.jsx(z,{})})});export{E as default};
